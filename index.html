<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Weekly Class Timetable</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />

  <!-- PWA Manifest 
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#0d6efd">-->

  <style>
    body {
      font-family: "Times New Roman", serif;
      background: #f8f9fa;
    }

    #desktop-view {
      display: block;
    }

    #mobile-view {
      display: none;
    }

    @media (max-width: 768px) {
      #desktop-view {
        display: none;
      }

      #mobile-view {
        display: block;
      }
    }

    .mobile-header {
      background: #0d6efd;
      color: white;
      padding: 15px;
      border-radius: 10px;
      text-align: center;
      margin-bottom: 18px;
    }

    /* Header Like Today or Tomorrow*/
    .mobile-card {
      background: white;
      border-radius: 10px;
      padding: 15px;
      margin-bottom: 12px;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
    }

    /* Classess Card*/
    .border-active {
      border-left: 6px solid #28a745
    }

    /* Today Active Class Boder only*/
    .border-upcoming {
      border-left: 6px solid #856404
    }

    /* Today and Tomorrow Upcoming Class Boder only*/
    .border-tomorrow_upcoming {
      border-left: 6px solid #155724
    }

    /*Tomorrow Upcoming Class Boder only*/
    .tomorrow_upcoming-badge {
      font-size: 0.9rem;
      color: #28a745;
      font-weight: bold;
    }

    /*-- For tomorrow going to start Class --*/
    .border-finished {
      opacity: 0.45;
    }

    /* For Fade Class */
    .next-info {
      background: #fff3cd;
      border-left: 6px solid #ffc107;
      padding: 14px;
      border-radius: 10px;
      margin-top: 20px;
    }

    /* Message Tag For Tomorrow Classes Like Today all classes are ended*/
    .T_next-info {
      background: #9cd8aa;
      border-left: 6px solid #107f2a;
      padding: 14px;
      border-radius: 10px;
      margin-top: 20px;
    }

    /* Message Tag For Tomorrow Classes Like Today all classes are ended*/
    .countdown-badge {
      font-size: 0.9rem;
      color: #28a745;
      font-weight: bold;
    }

    /*-- For counting time Text --*/
    .upcoming-badge {
      font-size: 0.9rem;
      color: #856404;
      font-weight: bold;
    }
    .Bala-badge {
      bottom: 4px;
      right: 4px;
      background:whitesmoke;
      color: gray;
      font-size: 0.9rem;
      padding: 2px 5px;
      border-radius: 5px;
    }

    /*-- For Today going to start Class --*/
  </style>
</head>

<body>
  <div class="container py-4">
    <h1 class="fw-bold text-center">Weekly Class Timetable</h1>

<div class="py-2 text-center">
  <div class="d-flex justify-content-between">
        <h4 id="TodayInfo"></h4>
        <p id="nowTimer" class="text-center "></p>
        <p id="starInfo"></p>       
  </div>
    <p id="starInfoTomorrow" class="d-none" ></p>
  </div>

    <!-- Desktop Table -->
    <div id="desktop-view">
      <div class="table-responsive">
        <table class="table table-bordered table-striped table-hover table-custom">
          <thead class="table-primary text-center">
            <tr>
              <th>Class / Day</th>
              <th>Sunday</th>
              <th>Monday</th>
              <th>Tuesday</th>
              <th>Wednesday</th>
              <th>Thursday</th>
              <th>Friday</th>
              <th>Saturday</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <th>Class 1</th>
              <td>4:30 PM - 6:00 PM</td>
              <td>7:30 AM - 9:00 AM</td>
              <td>3:00 PM - 4:30 PM</td>
              <td>12:00 PM - 1:30 PM</td>
              <td>1:30 PM - 3:00 PM</td>
              <td>10:30 AM - 12:00 PM</td>
              <td>9:00 AM - 10:30 AM</td>
            </tr>
            <tr>
              <th>Class 2</th>
              <td>3:00 PM - 4:30 PM</td>
              <td>1:30 PM - 3:00 PM</td>
              <td>12:00 PM - 1:30 PM</td>
              <td>10:30 AM - 12:00 PM</td>
              <td>9:00 AM - 10:30 AM</td>
              <td>7:30 AM - 9:00 AM</td>
              <td>6:00 AM - 7:00 AM</td>
            </tr>
            <tr>
              <th>Class 3</th>
              <td>12:00 PM - 1:30 PM</td>
              <td>10:30 AM - 12:00 PM</td>
              <td>9:00 AM - 10:30 AM</td>
              <td>7:30 AM - 9:00 AM</td>
              <td>6:00 AM - 7:30 AM</td>
              <td>3:00 PM - 4:30 PM</td>
              <td>1:30 PM - 3:00 PM</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
 <!-- DAILY SCHEDULE -->
  <div class="container">


    <div class="table-responsive">
      <table class="table table-bordered table-striped table-hover table-customs d-none" id="scheduleTable">
        <thead class="table-primary">
          <tr>
            <th>Date</th>
            <th>Day</th>
            <th>Amar</th>
            <th>Sithath</th>
            <th>MM</th>
          </tr>
        </thead>

        <tbody>
          <!-- FULL MonTH ROWS (unchanged from your input) -->
          <!-- DO NOT DELETE ‚Äî This is your actual data -->
          <!-- ******************************************** -->

          <tr>
            <td>1-Dec-25</td>
            <td>Mon</td>
            <td>12:00 AM - 06:14 AM</td>
            <td>06:14 AM - 11:59 PM</td>
            <td>-</td>
          </tr>
          <tr>
            <td>2-Dec-25</td>
            <td>Tue</td>
            <td>-</td>
            <td>12:00 AM - 11:59 PM</td>
            <td>-</td>
          </tr>
          <tr>
            <td>3-Dec-25 </td>
            <td>Wed</td>
            <td>04:47 PM - 11:59 PM</td>
            <td>12:00 AM - 04:47 PM</td>
            <td>-</td>
          </tr>
          <tr>
            <td>4-Dec-25</td>
            <td>Thu</td>
            <td>12:00 AM - 06:15 AM</td>
            <td>-</td>
            <td>06:15 AM - 11:59 PM</td>
          </tr>
          <tr>
            <td>5-Dec-25</td>
            <td>Fri</td>
            <td>-</td>
            <td>01:32 PM - 11:59 PM</td>
            <td>12:00 AM - 01:32 PM</td>
          </tr>
          <tr>
            <td>6-Dec-25</td>
            <td>Sat</td>
            <td>-</td>
            <td>12:00 AM - 11:59 PM</td>
            <td>-</td>
          </tr>
          <tr>
            <td>7-Dec-25</td>
            <td>Sun</td>
            <td>-</td>
            <td>12:00 AM - 11:59 PM</td>
            <td>-</td>
          </tr>
          <tr>
            <td>8-Dec-25</td>
            <td>Mon</td>
            <td>06:17 AM - 09:39 AM</td>
            <td><span id="8" class="">12:00 AM - 06:17 AM;</span> 09:39 AM - 11:59 PM</td>
            <td>-</td>
          </tr>
          <tr>
            <td>9-Dec-25</td>
            <td>Tue</td>
            <td>-</td>
            <td>12:00 AM - 11:59 PM</td>
            <td>-</td>
          </tr>
          <tr>
            <td>10-Dec-25</td>
            <td>Wed</td>
            <td>-</td>
            <td>12:00 AM - 11:59 PM</td>
            <td>-</td>
          </tr>
          <tr>
            <td>11-Dec-25</td>
            <td>Thu</td>
            <td>06:19 AM - 08:44 AM</td>
            <td><span id="11" class="">12:00 AM - 06:19 AM;</span> 08:44 AM - 11:59 PM</td>
            <td>-</td>
          </tr>
          <tr>
            <td>12-Dec-25</td>
            <td>Fri</td>
            <td>-</td>
            <td>12:00 AM - 11:59 PM</td>
            <td>-</td>
          </tr>
          <tr>
            <td>13-Dec-25</td>
            <td>Sat</td>
            <td>-</td>
            <td>12:00 AM - 06:20 AM</td>
            <td>06:20 AM - 11:59 PM</td>
          </tr>
          <tr>
            <td>14-Dec-25</td>
            <td>Sun</td>
            <td>06:21 AM - 12:06 PM</td>
            <td>12:06 PM - 11:59 PM</td>
            <td>12:00 AM - 06:21 AM</td>
          </tr>
          <tr>
            <td>15-Dec-25</td>
            <td>Mon</td>
            <td>02:09 PM - 11:59 PM</td>
            <td>12:00 AM - 02:09 PM</td>
            <td>-</td>
          </tr>
          <tr>
            <td>16-Dec-25</td>
            <td>Tue</td>
            <td>12:00 AM - 06:22 AM</td>
            <td>06:22 AM - 04:28 PM</td>
            <td>04:28 PM - 11:59 PM</td>
          </tr>
          <tr>
            <td>17-Dec-25</td>
            <td>Wed</td>
            <td>-</td>
            <td>06:22 AM - 11:59 PM</td>
            <td>12:00 AM - 06:22 AM</td>
          </tr>
          <tr>
            <td>18-Dec-25</td>
            <td>Thu</td>
            <td>-</td>
            <td>12:00 AM - 11:59 PM</td>
            <td>-</td>
          </tr>
          <tr>
            <td>19-Dec-25</td>
            <td>Fri</td>
            <td>-</td>
            <td>12:00 AM - 06:23 AM</td>
            <td>06:23 AM - 11:59 PM</td>
          </tr>
          <tr>
            <td>20-Dec-25</td>
            <td>Sat</td>
            <td>12:04 AM - 06:23 AM</td>
            <td>06:23 AM - 11:59 PM</td>
            <td>12:00 AM - 12:04 AM</td>
          </tr>
          <tr>
            <td>21-Dec-25</td>
            <td>Sun</td>
            <td>-</td>
            <td>12:00 AM - 11:59 PM</td>
            <td>-</td>
          </tr>
          <tr>
            <td>22-Dec-25</td>
            <td>Mon</td>
            <td>04:07 AM - 06:24 AM</td>
            <td>12:00 AM - 04:07 AM</td>
            <td>06:24 AM - 11:59 PM</td>
          </tr>
          <tr>
            <td>23-Dec-25</td>
            <td>Tue</td>
            <td>05:31 AM - 06:24 AM</td>
            <td>06:24 AM - 11:59 PM</td>
            <td>12:00 AM - 05:31 AM</td>
          </tr>
          <tr>
            <td>24-Dec-25</td>
            <td>Wed</td>
            <td>-</td>
            <td>12:00 AM - 06:24 AM</td>
            <td>06:24 AM - 11:59 PM</td>
          </tr>
          <tr>
            <td>25-Dec-25</td>
            <td>Thu</td>
            <td>-</td>
            <td>06:25 AM - 06:40 AM</td>
            <td><span id="25" class="">12:00 AM - 06:25 AM;</span> 06:40 AM - 11:59 PM</td>
          </tr>
          <tr>
            <td>26-Dec-25</td>
            <td>Fri</td>
            <td>-</td>
            <td>06:25 AM - 11:59 PM</td>
            <td>12:00 AM - 06:25 AM</td>
          </tr>
          <tr>
            <td>27-Dec-25</td>
            <td>Mon6</td>
            <td>-</td>
            <td>12:00 AM - 11:59 PM</td>
            <td>-</td>
          </tr>
          <tr>
            <td>28-Dec-25</td>
            <td>Sun</td>
            <td>06:25 AM - 11:59 PM</td>
            <td>12:00 AM - 05:18 AM</td>
            <td>05:18 AM - 06:25 AM</td>
          </tr>
          <tr>
            <td>29-Dec-25</td>
            <td>Mon</td>
            <td>12:00 AM - 04:04 AM</td>
            <td>04:04 AM - 11:59 PM</td>
            <td>-</td>
          </tr>
          <tr>
            <td>30-Dec-25</td>
            <td>Tue</td>
            <td>-</td>
            <td>12:00 AM - 11:59 PM</td>
            <td>-</td>
          </tr>
          <tr>
            <td>31-Dec-25</td>
            <td>Wed</td>
            <td>06:25 AM - 11:26 AM</td>
            <td><span id="31" class="">12:00 AM - 06:25 AM;</span> 11:26 AM - 11:59 PM</td>
            <td>-</td>
          </tr>

        </tbody>
      </table>
    </div>
  </div>
    <!-- Mobile View -->
    <div id="mobile-view"></div>
  </div>
  <script>
    // ------------------------------
    // TIME HELPERS
    // ------------------------------
    function parseTimeToMinutes(str) {
      const [time, mod] = str.trim().split(" ");
      let [h, m] = time.split(":").map(Number);
      if (mod === "PM" && h !== 12) h += 12;
      if (mod === "AM" && h === 12) h = 0;
      return h * 60 + m;
    }

    function parseRange(str) {
      if (!str.includes("-")) return [0, 0];
      const [s, e] = str.split("-").map(x => x.trim());
      return [parseTimeToMinutes(s), parseTimeToMinutes(e)];
    }

    function formatCountdown(mins) {
      let h = Math.floor(mins / 60);
      let m = mins % 60;
      return `${h > 0 ? h + "h " : ""}${m}m`;
    }

    // ------------------------------
    // MAIN FUNCTION
    // ------------------------------
    function renderMobileView() {

      const now = new Date();
      //const now = new Date("Fri Nov 28 2025 16:57:36 GMT+0530 (India Standard Time)");

      const today = now.getDay();
      const tomorrow = (today + 1) % 7;
      const minutesNow = now.getHours() * 60 + now.getMinutes();
      const dayNames = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
      const dayInfos=["üîó 2‚Åø·µà","1À¢·µó ‚Å∫‚Å∫","+","üîó1À¢·µó ‚Å∫","1À¢·µó ‚Å∫‚Å∫","+","1À¢·µó ‚Å∫‚Å∫",]

      const mobile = document.getElementById("mobile-view");
      mobile.innerHTML = `
    <div class="mobile-header">
      <h4 id "tomorrowUpTag"></h4>
      <h4 id="todayTag">Today: ${dayNames[today]} <span class="Bala-badge"> ${dayInfos[today]}</span></h4>
      <h4 id="tomorrowTag" class="d-none">Tomorrow : ${dayNames[tomorrow]} <span class="Bala-badge"> ${dayInfos[tomorrow]}</span></h4>
    </div>
  `;

      const rows = document.querySelectorAll("#desktop-view tbody tr");

      // -----------------------------------------
      // LOAD TODAY classes (original order)
      // -----------------------------------------
      let todayClasses = [];
      rows.forEach(row => {
        const name = row.children[0].innerText.trim();
        const timeStr = row.children[today + 1].innerText.trim();
        const [start, end] = parseRange(timeStr);
        todayClasses.push({ name, timeStr, start, end });
      });

      // Sorted copy for logic only
      let sortedToday = [...todayClasses].sort((a, b) => a.start - b.start);

      let running = sortedToday.find(c => minutesNow >= c.start && minutesNow < c.end);
      let upcoming = sortedToday.filter(c => minutesNow < c.start);
      let firstUpcoming = upcoming.length > 0 ? upcoming[0] : null;

      let finishedCount = todayClasses.filter(c => minutesNow >= c.end).length;

      // -----------------------------------------
      // CASE 1: ALL TODAY CLASSES ARE FINISHED
      // -----------------------------------------
      if (finishedCount === todayClasses.length) {

        document.getElementById("todayTag").classList.add("d-none");
        document.getElementById("tomorrowTag").classList.remove("d-none");
        document.getElementById("starInfoTomorrow").classList.remove("d-none");

        // mobile.innerHTML += `
        //   <div class="T_next-info mb-3"><strong>Today all classes are ended.</strong></div>
        // `;
        //document.getElementById("tomorrowUpTag").innerHTML = `<div class="T_next-info mb-3"><strong>Today all classes are ended.</strong></div>`;

        // Load tomorrow classes (original order)
        let tmr = [];
        rows.forEach(row => {
          const name = row.children[0].innerText.trim();
          const timeStr = row.children[tomorrow + 1].innerText.trim();
          const [start] = parseRange(timeStr);
          tmr.push({ name, timeStr, start });
        });

        // First class tomorrow
        let sorted = [...tmr].sort((a, b) => a.start - b.start);
        let firstTmr = sorted[0];

        // -----------------------------------------
        // SHOW TOMORROW'S CLASSES FIRST
        // -----------------------------------------
        tmr.forEach(c => {
          const highlight = (c.name === firstTmr.name);
          mobile.innerHTML += `
        <div class="mobile-card ${highlight ? "border-tomorrow_upcoming" : ""}">
          <h5>${c.name} ${highlight ? "<span class='tomorrow_upcoming-badge'>(Next)</span>" : ""}</h5>
          <p>${c.timeStr}</p>
        </div>
      `;
        });

        // -----------------------------------------
        // THEN SHOW TODAY'S (all faded)
        // -----------------------------------------
        mobile.innerHTML += `
      <div class="next-info my-3">
        <strong>Today‚Äôs Classes (Already Finished)</strong>
      </div>
    `;

        todayClasses.forEach(c => {
          mobile.innerHTML += `
        <div class="mobile-card border-finished">
          <h5>${c.name}</h5>
          <p>${c.timeStr}</p>
          <p class="text-muted small">‚úî Finished</p>
        </div>
      `;
        });

        return;
      }

      // -----------------------------------------
      // CASE 2: SHOW TODAY CLASSES (normal logic)
      // -----------------------------------------
      todayClasses.forEach(c => {

        // Running
        if (running && c.name === running.name) {
          const endIn = c.end - minutesNow;
          mobile.innerHTML += `
        <div class="mobile-card border-active">
          <h5>${c.name} <span class="countdown-badge">(Running)</span></h5>
          <p>${c.timeStr}</p>
          <p class="countdown-badge">‚è≥ Ends in ${formatCountdown(endIn)}</p>
        </div>
      `;
          return;
        }

        // First upcoming highlighted
        if (!running && firstUpcoming && c.name === firstUpcoming.name) {
          const startIn = c.start - minutesNow;
          mobile.innerHTML += `
        <div class="mobile-card border-upcoming">
          <h5>${c.name} <span class="upcoming-badge">(Next)</span></h5>
          <p>${c.timeStr}</p>
          <p class="upcoming-badge">üïí Starts in ${formatCountdown(startIn)}</p>
        </div>
      `;
          return;
        }

        // Finished
        if (minutesNow >= c.end) {
          mobile.innerHTML += `
        <div class="mobile-card border-finished">
          <h5>${c.name}</h5>
          <p>${c.timeStr}</p>
          <p class="text-muted small">‚úî Finished</p>
        </div>
      `;
          return;
        }

        // Normal class
        mobile.innerHTML += `
      <div class="mobile-card">
        <h5>${c.name}</h5>
        <p>${c.timeStr}</p>
      </div>
    `;
      });
    }
     /* -----------------------------------------
       DAILY SCHEDULE TABLE
    ----------------------------------------- */
    function highlightCurrentDaily() {
      const now = new Date();
      //const now = new Date("Fri Dec 19 2025 18:57:36 GMT+0530 (India Standard Time)"); //for setting DateTime by own
      const date = now.getDate();
      const minsNow = now.getHours() * 60 + now.getMinutes();

      //*==== Star starts*//
      const stars=["","","","","","","","","","","",
        "","‡Æö‡Øã‡Æ∞‡Øç‡Æµ‡ØÅ","‡ÆØ‡Øã‡Æï‡ÆÆ‡Øç","‡Æ§‡Ææ‡Æ©‡ÆÆ‡Øç","‡Æ®‡Æø‡Æ±‡Øà‡Æµ‡ØÅ","‡Æ™‡Æø‡Æ∞‡Æø‡Æµ‡ØÅ","‡Æà‡Æï‡Øà","‡Æì‡ÆØ‡Øç‡Æµ‡ØÅ","‡Æ®‡Æü‡Øç‡Æ™‡ØÅ",  "‡Æâ‡Æ§‡Æµ‡Æø",
        "‡ÆÆ‡ØÅ‡ÆØ‡Æ±‡Øç‡Æö‡Æø","‡Æö‡Æø‡Æ©‡Øç‡Æ§‡Æ©‡Øç‡Æ©‡Øà","‡Æµ‡Æ∞‡Æµ‡ØÅ","‡Æµ‡Ææ‡Æ¥‡Øç‡Æµ‡ØÅ","‡ÆÆ‡ØÅ‡ÆØ‡Æ±‡Øç‡Æö‡Æø","‡Æé‡Æ§‡Æø‡Æ∞‡Øç‡Æ™‡Øç‡Æ™‡ØÅ","‡Æö‡Æø‡Æ©‡ÆÆ‡Øç","‡Æì‡ÆØ‡Øç‡Æµ‡ØÅ","‡Æ≤‡Ææ‡Æ™‡ÆÆ‡Øç",  "‡Æö‡Æ≤‡Æ©‡ÆÆ‡Øç","‡ÆÖ‡ÆÆ‡Øà‡Æ§‡Æø"];

        document.getElementById("starInfo").textContent=`Rasi : ${stars[date]}`;
        document.getElementById("starInfoTomorrow").textContent=`T_Rasi : ${stars[date+1]}`;
      //*==== Star Ends*//

      const table = document.getElementById("scheduleTable");
      const row = table.rows[date];
      if (!row) return;

      [...row.cells].forEach(c => c.classList.add("today-col"));

      let active = null;
      const names = ["", "", "Amar", "Sithath", "MM"];

      for (let i = 2; i <= 4; i++) {
        const cell = row.cells[i];
        const txt = cell.textContent.trim();
        if (txt === "-" || !txt) {
          cell.classList.add("faded");
          continue;
        }

        const parts = txt.split(";");
        parts.forEach(p => {
          const [s, e] = parseRange(p.trim());
          if (minsNow >= s && minsNow < e) {
            active = i;
            cell.classList.add("glow");
            const left = e - minsNow;
            // cell.innerHTML += `<div class="timer-badge">${formatCountdown(left)} left</div>`;
            const badge = document.createElement("div");
            badge.className = "timer-badge";
            badge.textContent = `${formatCountdown(left)} left`;
            cell.appendChild(badge);

          } else if (minsNow > e && parts[1] == null) {
            cell.classList.add("faded");
          }
          const time1 = document.getElementById(date);

          if (parts[1] != undefined) {
            const [s1, e1] = parseRange(parts[0].trim());
           // if (minsNow >= e1) {time1.classList.add("text-decoration-line-through");time1.classList.add("fw-normal");}// this one
           if (minsNow >= e1) time1.classList.add("d-none");// or this one
          }

        });
      }

      document.getElementById("TodayInfo").textContent =
        active ? `${names[active]}` : "Refresh";
      const todayinfos = document.getElementById(`TodayInfo`);
      if (active) {
        if (names[active] === "MM") todayinfos.classList.add("text-danger");
        else if (names[active] === "Sithath") todayinfos.classList.add("text-primary");
        else if (names[active] === "Amar") todayinfos.classList.add("text-success");
      } else {
        todayinfos.classList.add("text-success"); // default color if none
      }

    }
    /* -----------------------------------------
   clock timer start
----------------------------------------- */
    function refresh() {
      const now = new Date();
      //const time = now.toLocaleTimeString(); //  24-hour format
        const time = now.toLocaleTimeString('en-US', { hour12: true }); // force 12-hour format
      document.getElementById("nowTimer").innerText = time.toString();
    }
    refresh();
    renderMobileView();
    highlightCurrentDaily();
    setInterval(renderMobileView, 60000);
    setInterval(highlightCurrentDaily, 60000);
    setInterval(refresh, 1);
  </script>




</body>

</html>